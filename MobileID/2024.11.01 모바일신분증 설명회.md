오픈소스: https://github.com/OmniOneID/did-client-sdk-ios
- 클라에서 VC 저장할 데이터베이스가 필요.
	- -> iOS는 그냥 파일로 저장함.
- base58
- rsa, aes 하이브리드 라온 커스텀.
- ecdsa 서명검증. 포멧이 안 맞음. x, y좌표. → 하지만 윌로우가 다 뚫어놓음

iOS, 비삼성에서의 월렛.
오픈소스화는 디지털인증협회에서 주관

한국디지털인증협회
OpenDID를 활성화 표준화가 목적.
working group
- 일반회원: 무료
- 정회원: 1천만. 오픈소스 기술지원 pack1. 
- 기존 채널로도 계속 지원하겠지만. 활성화되고 문의가 많아지만 정회원 위주가 될 것.

## 월렛 개발 범위
### 1-1. 월렛 개발 개요
- 공용지갑(삼성월렛 지갑24)을 위해 구축한 민간사업용 인프라는 동일하게 사용가능: CA, CAS
- 2nd CA관련 기능은 제외
- 비삼성은 한개의 Wallet만 유효한 형태(1-DID, 1-VC) -> 전용월렛
- 월렛 역할 구조
	- Wallet Key: (attest wallet with authToken)월렛 사업자 키. 카뱅에서 만든 wallet key이 맞는지 검증해야 함. 카카오 루트인증서를 SSI Server에 등록하고, 해당인증서로 만든 것으로 요청해야 함.
	- User Key: 정부서버와 통신할 때 authToken과 함께 사용자 등록
	- Verifiable Credential: 
- (같은 앱내에서 WalletToken없이 동작하게 수정하려면 보안규격서(?)가 별도로 필요)

### 1-2 구현 기본 원칙
- Wallet 신뢰성
	- Wallet 신뢰성 보장을 위해 월렛사업자는 wallet key를 별도로 모바일신분증서버에 등록해야 함
	- DID Document 등록시, 신뢰된 Wallet에서 DID Document가 등록된다는 걸 보장하기 위해 Wallet key로 서명되어야 함
- Wallet 바인딩
	- 월렛 생성: 월렛과 사용자를 바인딩
	- 사용자바인딩: 사용자정보를 기준으로 한 WalletToken으로 월렛에 접근
	- WalletToken: CA에 로그인되어 있는 사용자의 CI를 해시한값과 DID개인키로 서명한 값을 포함.
	- WalletOwner: 월렛과 CA단 최초 바인딩시의 사용자를 오너로 설정(일반적으로 DId Document 생성시 오너 설정됨)
- Wallet 라이프사이클
	- DID 생성시 Wallet과 사용자간 바인딩 개시
	- DID 삭제시 Wallet과 사용자간 바인딩 종료
- Wallet 접근제어
	- Wallet 접근제어는 사업자별 각자 스펙으로 개발(오픈소스엔 없을 듯?)
	- Wallet에서 생성되는 DID개인키는 키종류별로 PIN, 생체로 접근제어 해야함(행안부규격)
	- DID개인키의 보호방법은 각자 사업자별로 각자 스펙으로 개발 가능(보호 방안을 행안부에 공개 필요)
- 사용 라이프사이클(WalletToken, purpose)
	- 월렛 접근시에는 반드시 행안부 purpose 규격에 따라 사용에 대한 라이프싸이클을 가져야 함.
	- 라이프사이프이 무효화된 purpose의 walletToken은 반드시 월렛 내에서 파기되어야 함.
(오픈소스에 아키텍쳐 설명 포함)

### 1-3 월렛 사이프사이클
- DID 등록: 모바일신분증서버에 DID Document 등록(w/hAuthToken, wallet attestation(카뱅에서 만든 것이라는 걸 검증)) -> 블록체인에 DID Document 등록
- VC발급: 모바일신분증서버에 IC카드 인증, 안면인증(w/hAuthToken)
- VC조회
- 주소 갱신: 모바일신분증서버에 VC인증(w/hAuthToken) -> 블록체인에 주소상태 변경 요청
- VC삭제
- DID삭제(Wallet삭제)

### 1.-4 월렛 토큰⭐️
이 부분을 구현 고민해야 함.
오픈소스에 대부분 되어 있음.
월렛토큰이 가장 중요한 부분.
UML은 기존 공용지갑과 동일.

### 2-1 DID 등록/VC발급
- ✅IC카드인증 동작방식: 오픈소스 미포함. 각 사업자가 구현해야 하는 부분. IC카드 규격은 조폐공사에서 공유해줄 예정.
- ❓CA가 CAS거치지 않고 모신서버와 직접(?)
	- (기존에 CAS 거쳐도 된다고 하지 않았나?)
	- 기존 공용지갑을 따라가기 위해?

### 3-1 방법론
- 메세지 규격, 데이터 포멧은 기존 공용지갑과 동일.
- 행안부와 가이드해줄 예정.

### 3-3 오픈소스 지원
- 오픈범위(did-client-sdk-ios)
	- Wallet API: 월렛접근을 위한 external API
	- Service Wallet: 서비스 통신을 위한 토큰 관리 및 메시지 생성
	- Core Wallet: DID/VC 등 관리
	- Utility: 암호 알고리즘 제공
	- Comm: 통신관리
	- Data model: 앱월렛SDK에서 사용하는 데이터 모델 정의

## 월렛 동작 방식



## 지원 방안


## Q&A
- (안드) 깃헙에 jar 파일에 대한 설명 필요
- 오픈소스의 biometric. 오픈소스 기준으로 지문만 있어도 되는건지? 삼성과 규격이 달라짐 -> 라온에서 결정할 정책은 아님. 행안부 규격을 따라야 함.
	- 정부가 원하는 방향: 민간에서 다양한 인증기술이 나올 것이지만 정부가 주도할 수는 없음.(부모가 한번더 인증해준다거나). 민간에서 제안했을 때 타당하다면 채택하게 끔 할 것.
- VC 저장시 삼성은 heap에 저장하는데, 오픈소스에는 룸사용(안드기준)하는 것에 대해. 
	- iOS SE영역 등 어느정도를 규격으로 인정할 것인지 아직 답을 내리지 못하고 있음.
	- 앞으로 의사결정해야할 부분 중 하나.

- Zero-trust를 기반으로 구축해서 서명이 매우 많음.
	- 비삼성에서는 CA사업자 내에 Wallet을 구축. 당연히 믿을 수 있는데 WalletToken이 필요한가? 이것도 고민점 중 하나. 
	- 불필요한 것은 걷어낼 계획이지만 유지될 수도 있음. 삼성과 달라졌을 때의 사이드이펙트 들을 고민해볼 것.